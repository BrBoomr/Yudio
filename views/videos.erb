<% def youtube_embed(youtube_url)
  if youtube_url[/youtu\.be\/([^\?]*)/]
    youtube_id = $1
  else
    # Regex from # http://stackoverflow.com/questions/3452546/javascript-regex-how-to-get-youtube-video-id-from-url/4811367#4811367
    youtube_url[/^.*((v\/)|(embed\/)|(watch\?))\??v?=?([^\&\?]*).*/]
    youtube_id = $5
  end

  %Q{<iframe title="YouTube video player" width="640" height="390" src="https://www.youtube.com/embed/#{ youtube_id }" frameborder="0" allowfullscreen></iframe>}
end%>
<!--
<% @Videos.each do |v|%>
    <div class="jumbotron jumbotron-fluid">
        <div class="container text-center">
            <h1 class="display-4"><%=v.title%></h1><%if v.pro%><span class="badge badge-secondary">Pro</span><%end%> 
            <p class="lead"><%=v.description%></p>
            <span class = "border-0"> <%=youtube_embed(v.video_url)%> </span>
        </div>
    </div>
    <hr/>
<%end%>
-->
<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <%for x  in 0..(@Videos.count - 1)%>
      <li data-target="#carouselExampleIndicators" data-slide-to="<%=x%>" class="active"></li>
    <%end%>
  </ol>
  <div class="carousel-inner jumbotron jumbotron-fluid" style = "background:gray;">
    <%@Videos.each do |v|%>
      <%if v.id==1%>
        <div class="carousel-item active text-center">
          <h1 class="display-4"><%=v.title%></h1><%if v.pro%><span class="badge badge-secondary">Pro</span><%end%> 
          <p class="lead"><%=v.description%></p>
          <span class = "border-0"> <%=youtube_embed(v.video_url)%> </span>
        </div>
      <%else%>
        <div class="carousel-item text-center">
          <h1 class="display-4"><%=v.title%></h1><%if v.pro%><span class="badge badge-secondary">Pro</span><%end%> 
          <p class="lead"><%=v.description%></p>
          <span class = "border-0"> <%=youtube_embed(v.video_url)%> </span>
        </div>
      <%end%>
    <%end%>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>


